digraph current_workflow {
  rankdir=TB
  bgcolor=transparent
  node [style=filled, fillcolor=white]
  edge [color=grey]

  start
  end
  start -> id_check
  subgraph cluster_votingbooth {
    bgcolor="#fbeee0"
    label="voting booth"
    fill_out_ballot -> submit_ballot -> take_code
  }
  subgraph cluster_checkin {
    bgcolor="#fbeee0"
    label="check-in station"
    id_check [fillcolor=lightgreen]
    id_check -> fill_out_ballot
  }
  subgraph cluster_challenge {
    bgcolor="#fbeee0"
    label="challenge station"
    audit_or_cast [shape=diamond]
  }
  // TODO separate post
  // subgraph cluster_verify {
  //   label="verify tally"
  //   verify_vote_included -> verify_tally
  // }
  take_code -> audit_or_cast
  audit_or_cast -> fill_out_ballot [label="audit", weight=0]
  // audit_or_cast -> verify_vote_included [label="cast"]
  audit_or_cast -> end [label="cast"]
  // verify_vote_included -> end
  // verify_tally -> end
}
