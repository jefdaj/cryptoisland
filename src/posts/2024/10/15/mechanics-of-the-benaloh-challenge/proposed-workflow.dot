digraph proposed_workflow {
  start -> id_check
  subgraph cluster_checkin {
    label="check-in station"
    // id_check -> mint_vip_nft
    id_check
  }
  subgraph cluster_votingbooth {
    label="voting booth"
    fill_out_ballot -> submit_ballot -> take_code
  }
  subgraph cluster_phone {
    label="voting app"
    take_code -> confirm_onchain -> audit_or_cast
    decrypt_ballot [shape=diamond]
    audit_or_cast [shape=diamond]
    rank=same {audit_or_cast,decrypt_ballot}
    audit_or_cast -> decrypt_ballot [label="audit"]
  }
  // TODO separate post
  // subgraph cluster_checkout {
  //   label="check-out station"
  //   mint_personal_nfts
  // }
  // subgraph cluster_dispute {
  //   label="arbitration"
  //   dispute -> open_ballot_box -> id_check
  // }
  // TODO separate post
  // subgraph cluster_verify {
  //   label="verifier app"
  //   verify_tally -> mint_verifier_nft
  // }
  id_check -> fill_out_ballot
  // audit_or_cast -> mint_personal_nfts [label="cast"]
  audit_or_cast -> end [label="cast"]
  decrypt_ballot -> id_check [label="certify", weight=0]
  decrypt_ballot -> id_check [label="dispute", weight=1]
  // id_check -> mint_personal_nfts [style="dashed"] // leave without voting
  // mint_personal_nfts -> verify_tally
  // mint_personal_nfts -> end
  // mint_verifier_nft -> end
}
