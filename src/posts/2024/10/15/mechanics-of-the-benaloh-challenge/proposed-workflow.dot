digraph proposed_workflow {
  start -> id_check
  subgraph cluster_phone {
    label="phone app"
    take_qrcode -> confirm_hash
    audit_or_cast -> {cast,audit}
    confirm_hash -> audit_or_cast
    audit -> decrypt_ballot -> {certify,dispute}
  }
   subgraph cluster_checkout {
    label="check-out station"
    mint_nfts
  }
  subgraph cluster_checkin {
    label="check-in station"
    id_check -> mint_vip_nft
  }
  subgraph cluster_votingbooth {
    label="voting booth (no phone)"
    fill_out_ballot -> scan_submit_ballot -> take_qrcode
  }
 // subgraph cluster_dispute {
  //   label="arbitration"
  //   dispute -> open_ballot_box -> id_check
  // }
  subgraph cluster_verify {
    label="verifier app"
    verify_election -> mint_verifier_nft
  }
  mint_vip_nft -> fill_out_ballot
  cast -> mint_nfts
  {certify,dispute} -> id_check
  id_check -> mint_nfts [style="dashed"] // leave without voting
  mint_nfts -> verify_election
  mint_nfts -> end
  mint_verifier_nft -> end
}
